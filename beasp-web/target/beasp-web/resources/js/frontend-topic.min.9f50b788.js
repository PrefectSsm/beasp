!function(a){var b=0,c={init:function(a){},pop:function(b){function c(){null!==i.popFunc&&i.popFunc();var b="<div id='blacklayer'></div>";a("body").append(b);var c=a(document).height();a("#blacklayer").css({zIndex:i.zIndex-10,background:"#000",opacity:i.opacity,position:"absolute",left:0,top:0,width:"100%",height:c}),a(".popclose").bind("click",function(){h=0,a("#blacklayer").remove(),null===i.popHtml?a(i.popId).hide():a(i.popId).remove(),null!=i.closePop&&i.closePop()})}function d(b,c,e){return 0===h?!1:void(_jumpfunc=window.setTimeout(function(){if(b--,b>0){if(1==g)return!1;a(c).html(b+"秒"),d(b,c,e)}else null==e?(a("#blacklayer").remove(),a(i.popId).remove()):document.location=e},1e3))}var e=a(window).height(),f=a(window).width(),g=0,h=1,i={width:100,height:100,zIndex:9999,poparent:"body",opacity:.5,popId:null,popHtml:null,popFunc:null,time:null,timeId:null,url:null,closePop:null};b&&a.extend(i,b);var j,k=(f-i.width)/2;return null===i.popHtml?this.each(function(){var b=a(this);"auto"==i.height&&(i.height=b.height()),j=(e-i.height)/2,b.show(),b.css({width:i.width,height:i.height,zIndex:i.zIndex,top:j,left:k,position:"fixed"}),c(),null!==i.time&&d(i.time,i.timeId,i.url)}):(null!==i.popHtml&&(a(i.poparent).append(i.popHtml),"auto"==i.height&&(i.height=a(i.popId).height()),j=(e-i.height)/2,a(i.popId).css({width:i.width,height:i.height,zIndex:i.zIndex,top:j,left:k,position:"fixed"}),c()),void(null!==i.time&&d(i.time,i.timeId,i.url)))},tag:function(b){var c={type:"click",selected:"on",contentClass:".content",func:null};return b&&a.extend(c,b),"click"!=c.type&&"mouseover"!=c.type?!1:(a(this).eq(0).addClass(c.selected),this.each(function(){function b(){var b=d.index();d.siblings().removeClass(c.selected),d.addClass(c.selected),a(c.contentClass).hide(),a(c.contentClass).eq(b).show(),null!=c.func&&c.func()}var d=a(this);a(c.contentClass).hide(),a(c.contentClass).eq(0).show(),d.bind(c.type,b)}))},imgmove:function(c){function d(){var c=a(e.oneEle).size(),d=c*e.oneWidth,f=d/e.boxWidth;f%e.boxWidth>0;var g=a(e.oneEle).parent();if(1==e.loop){a(e.oneEle).parent().width(d).css("left",-e.oneWidth);var g=a(e.oneEle).parent(),h=a(e.oneEle).last();g.prepend(h.clone()),h.remove()}else a(e.oneEle).parent().width(d);a(e.prev).click(function(){if(1==e.loop){var c=a(e.oneEle).last();TweenMax.to(g,1,{left:0,onComplete:function(){g.prepend(c.clone()),g.css("left",-e.oneWidth),a(e.oneEle).last().remove()},ease:Quart.easeOut})}else b>0&&(b--,TweenMax.to(g,1,{left:-e.boxWidth*b,ease:Quart.easeOut}))}),a(e.next).click(function(){1==e.loop?TweenMax.to(g,.4,{left:-e.oneWidth,onComplete:function(){g.css("left","0px");var b=a(e.oneEle).slice(0,1);g.append(b.clone()),a(e.oneEle).slice(0,1).remove(),console.log("ok")},ease:Quart.easeOut}):f-1>b&&(b++,TweenMax.to(g,1,{left:-e.boxWidth*b,ease:Quart.easeOut}))})}var e={oneEle:null,oneWidth:null,loop:!1,boxWidth:null,prev:null,next:null};c&&a.extend(e,c),d()}};a.fn.tooltip=function(b){return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.tooltip"):c.init.apply(this,arguments)}}(jQuery),$(function(){$("#subCourseBtn").click(function(a){if(a.preventDefault(),window.LOGIN_INFO.is_login===!1)return tips(1,"请先登录"),setTimeout(function(){window.location.href=window.WWW_URL+"auth/jkxy-login?redirect_uri="+encodeURIComponent(window.CURRENT_URL+"#apply")},2e3),!1;if(window.LOGIN_INFO.is_vip===!1)return tips(1,"只有会员才能提交课程需求"),window.location.hash="",!1;var b="",c="dia_topic_subcourse";b+='<div class="dialog" id="'+c+'">',b+='<div class="dialog-box">',b+='<div class="dialog-tit"><span class="poptit">提交课程需求</span><span class="popclose"></span></div>',b+='<div class="dialog-body">',b+='<div class="jkxy-form">',b+="<form>",b+='<input type="hidden" id="temp" value="" />',b+='<div class="form-c">',b+='<div class="form-dom">',b+='<div class="form-tit"><i>*</i>课程标题：</div>',b+='<div class="form-input">',b+='<input type="text" class="jkxy-input" name="course" placeholder="控制在 24 个文字之内" maxlength="24" id="topic_course" />',b+='<div class="form-tip">&nbsp;</div>',b+="</div>",b+="</div>",b+='<div class="form-dom">',b+='<div class="form-tit"><i>*</i>课程描述：</div>',b+='<div class="form-input">',b+='<textarea name="content" id="topic_content" class="jkxy-textarea topic-textarea" placeholder="控制在 500 个文字之内" maxlength="500"></textarea>',b+='<div class="form-tip">&nbsp;</div>',b+="</div>",b+="</div>",b+='<div class="form-dom">',b+='<div class="form-tit">&nbsp;</div>',b+='<div class="form-input"><a href="javascript:;" class="greenbtn" id="diaSubCourse">提交需求</a></div>',b+="</div>",b+="</div>",b+="</form>",b+="</div>",b+="</div>",b+="</div>",b+="</div>",$().tooltip("pop",{width:650,height:380,popId:"#"+c,opacity:.8,popHtml:b,popFunc:function(){var a=$("#"+c),b=a.find("#diaSubCourse");b.click(function(){var a=$("#topic_course").val(),c=$("#topic_content").val();if(1==b.attr("stop"))return!1;if(!a)return tips(1,"请填写课程标题"),!1;if(a.length>24)return tips(1,"课程标题请控制在24个文字之内"),!1;if(!c)return tips(1,"请填写课程描述"),!1;if(c.length>500)return tips(1,"课程描述请控制在500个文字之内"),!1;if(!a||!c)return tips(1,"请补充完所有信息"),!1;b.attr("stop",1);var d={title:a,idea:c};$.ajax({url:window.WWW_URL+"topic/create",data:d,dataType:"json",type:"POST",async:!1,success:function(a){if(0===a.error){$(".popclose").click(),tips(0,a.message);a.data.topic.id;setTimeout(function(a){window.location.href=window.WWW_URL+"topic"},2e3)}else tips(1,a.message)},error:function(){tips(1,"系统错误")}}),b.removeAttr("stop")})},closePop:function(){}})}),$(".upvote").click(function(a){if(a.preventDefault(),window.LOGIN_INFO.is_login===!1)return tips(1,"请先登录"),setTimeout(function(){window.location.href=window.WWW_URL+"auth/jkxy-login?redirect_uri="+encodeURIComponent(window.CURRENT_URL)},2e3),!1;var b=$(this).data("id"),c=this,d=$(this).find(".clk-number");$.ajax({url:window.WWW_URL+"public/upvote",type:"POST",dataType:"json",data:{obj_type:1,type:1,obj_id:b},success:function(a){0===a.error?"create"==a.data.opration?(d.text(parseInt(d.text())+1),$("#total_topic_up").text(parseInt($("#total_topic_up").text())+1),$(c).addClass("active")):(d.text(parseInt(d.text())-1),$(c).removeClass("active"),$("#total_topic_up").text(parseInt($("#total_topic_up").text())-1)):tips(1,a.message)},error:function(){tips(1,"系统错误")}})}),$(".need_login").click(function(a){var b=$(this).attr("href");return window.LOGIN_INFO.is_login===!1?(tips(1,"请先登录"),setTimeout(function(){window.location.href=window.WWW_URL+"auth/jkxy-login?redirect_uri="+encodeURIComponent(b)},2e3),!1):void 0});var a=document.location.toString();if(a.match("#")){var b=a.split("#")[1];"apply"==b&&$("#subCourseBtn").click(),b.match("^topic_")&&$("#"+b).addClass("active")}});